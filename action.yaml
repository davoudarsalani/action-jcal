name: Jcal
description: 'Download/install the latest version of jcal'
author: Davoud Arsalani <ielts@davoudarsalani.ir>

inputs:
  source:
    required: false
    default: 'docker'

runs:
  using: 'composite'
  steps:
    - name: Setting up python
      if: ${{ inputs.source == 'jdatetime' }}
      uses: actions/setup-python@v2

    - name: Pulling/cloning/downloading
      shell: bash
      run: |
        case '${{ inputs.source }}' in
          docker )
            docker pull davoudarsalani/jcal
          ;;
          jdatetime )
            pip install --upgrade pip jdatetime
          ;;
          * )
            ## set timezone
            sudo ln -fs /usr/share/zoneinfo/Asia/Tehran /etc/localtime
            sudo hwclock --systohc --utc
            sudo timedatectl set-ntp true

            wget -q 'https://raw.githubusercontent.com/davoudarsalani/scripts/master/install-jcal'
            chmod +x ./install-jcal
            ./install-jcal '${{ inputs.source }}'
          ;;
        esac

branding:
  icon: calendar
  color: blue
